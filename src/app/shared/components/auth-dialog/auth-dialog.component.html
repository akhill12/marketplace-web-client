<!-- <p-dialog [(visible)]="displayDialog" modal="true" [style]="{width: '400px'}" (onHide)="closeDialog()">
  <div class="auth-container" [ngClass]="{'show-register': !isLoginView}">
    <div class="auth-form login-form" *ngIf="isLoginView">
      <h2>Login</h2>
      <form (ngSubmit)="onLogin()">
        <input type="email" pInputText [(ngModel)]="email" name="email" placeholder="Email" class="w-full mb-3">
        <input type="password" pInputText [(ngModel)]="password" name="password" placeholder="Password" class="w-full mb-3">
        <button pButton type="submit" label="Login" class="w-full" [disabled]="(loading$ | async)"></button>
      </form>
      <p *ngIf="error$ | async as error" class="text-red-500 mt-2">{{error}}</p>
      <p class="mt-3 text-center">
        Don't have an account?
        <a href="#" (click)="toggleAuthView(); $event.preventDefault()">Register</a>
      </p>
    </div>
    <div class="auth-form register-form" *ngIf="!isLoginView">
      <h2>Register</h2>
      <form [formGroup]="registerForm" (ngSubmit)="onRegister()">

      </form>
      <p *ngIf="error$ | async as error" class="text-red-500 mt-2">{{error}}</p>
      <p class="mt-3 text-center">
        Already have an account?
        <a href="#" (click)="toggleAuthView(); $event.preventDefault()">Login</a>
      </p>
    </div>
  </div>
</p-dialog> -->

<p-dialog [(visible)]="displayDialog" modal="true" [style]="{width: '400px'}" (onHide)="closeDialog()">
  <div class="auth-container" [ngClass]="{'show-register': !isLoginView}">
    <div class="auth-form login-form" *ngIf="isLoginView">
      <h2>Login</h2>
      <form (ngSubmit)="onLogin()">
        <p class="text-green-500">Sign-up successful! Please log in to continue.</p>
        <input type="email" pInputText [(ngModel)]="email" name="email" placeholder="Email" class="w-full mb-3">
        <input type="password" pInputText [(ngModel)]="password" name="password" placeholder="Password" class="w-full mb-3">
        <button pButton type="submit" label="Login" class="w-full" [disabled]="(loading$ | async)"></button>
      </form>
      <p *ngIf="error$ | async as error" class="text-red-500 mt-2">{{error}}</p>
      <p class="mt-3 text-center">
        Don't have an account?
        <a href="#" (click)="toggleAuthView(); $event.preventDefault()">Register</a>
      </p>
    </div>
    <div class="auth-form register-form" *ngIf="!isLoginView">
      <h2>Register</h2>
      <form [formGroup]="registerForm" (ngSubmit)="onRegister()">
        <div class="p-fluid">
          <div class="p-field mb-3">
            <input type="text" pInputText formControlName="firstName" placeholder="First Name" class="w-full">
            <small class="p-error" *ngIf="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched">
              First Name is required
            </small>
          </div>
          <div class="p-field mb-3">
            <input type="text" pInputText formControlName="lastName" placeholder="Last Name" class="w-full">
            <small class="p-error" *ngIf="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched">
              Last Name is required
            </small>
          </div>
          <div class="p-field mb-3">
            <input type="email" pInputText formControlName="email" placeholder="Email" class="w-full">
            <small class="p-error" *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
              <span *ngIf="registerForm.get('email')?.hasError('required')">Email is required</span>
              <span *ngIf="registerForm.get('email')?.hasError('email')">Please enter a valid email</span>
              <span *ngIf="registerForm.get('email')?.hasError('clarkuEmail')">Only clarku.edu email addresses are allowed</span>
            </small>
          </div>
          <div class="p-field mb-3">
            <input type="password" pInputText formControlName="password" placeholder="Password" class="w-full">
            <small class="p-error" *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
              Password must be at least 6 characters long
            </small>
          </div>
          <div class="p-field mb-3">
            <input type="password" pInputText formControlName="confirmPassword" placeholder="Confirm Password" class="w-full">
            <small class="p-error" *ngIf="registerForm.get('confirmPassword')?.hasError('passwordMismatch') && registerForm.get('confirmPassword')?.touched">
              Passwords do not match
            </small>
          </div>
          <button pButton type="submit" label="Register" class="w-full" [disabled]="registerForm.invalid || (loading$ | async)"></button>
        </div>
      </form>
      <p class="mt-3 text-center">
        Already have an account?
        <a href="#" (click)="toggleAuthView(); $event.preventDefault()">Login</a>
      </p>
    </div>
  </div>
</p-dialog>

